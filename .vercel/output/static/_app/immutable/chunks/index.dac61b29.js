import{j as u,w as q}from"./singletons.0d3e7b8e.js";var E=e=>t=>r=>r?t.setAttribute(e,r):t.removeAttribute(e),w=e=>t=>r=>r===void 0?t.removeAttribute(e):t.setAttribute(e,r.toString()),Y=E("aria-label"),S=e=>t=>u(e,r=>r.label).subscribe(Y(t));function b(e,t){let r=t.map(n=>n(e));return()=>r.forEach(n=>n())}var Z=" ",_="Enter",ee="Escape",te="ArrowUp",re="ArrowDown",ne="Home",ie="End",ae="PageUp",se="PageDown",T="Tab",D=e=>t=>{switch(t){case Z:case _:return e(),!0}return!1},de=0;function oe(){return++de}function f(e,t){return e.id||(e.id=`${t}:${oe()}`),e}var $=(e,t,r,n=!1)=>(e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)),P=e=>t=>$(t,"click",e);function h(...e){let t=r=>{for(let n of e)if(n(r.key)){r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation();return}};return r=>(r.addEventListener("keydown",t),()=>r.removeEventListener("keydown",t))}var m=()=>{},p=e=>t=>(t.setAttribute("role",e),m),g=(e=-1)=>t=>(t.tabIndex=e,m),ue=e=>t=>(t.setAttribute("type",e),m),F=e=>"headlessui-"+e,le=E("aria-activedescendant"),ce=e=>t=>u(e,r=>r.items[r.active]?.id??"").subscribe(le(t)),ve=E("aria-controls"),me=e=>t=>u(e,r=>r.controls).subscribe(ve(t)),be=w("aria-disabled"),fe=e=>t=>u(e,r=>r.items.find(n=>n.id===t.id)?.disabled).subscribe(be(t)),K=e=>t=>{t&&requestAnimationFrame(()=>e.focus({preventScroll:!0}))},U=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"];function I(e){if(e.key!==T)return;let t=e.currentTarget,r=e.target;if(!t.contains(r))return;let n=[...t.querySelectorAll(U.join(","))],i=n[0],s=n[n.length-1];r===i&&e.shiftKey&&(s.focus(),e.preventDefault()),r===s&&!e.shiftKey&&(i.focus(),e.preventDefault())}var pe=e=>t=>u(e,r=>r.expanded).subscribe(r=>{if(r){let n=t.querySelector(U.join(","));n&&requestAnimationFrame(()=>n.focus()),t.addEventListener("keydown",I)}else t.removeEventListener("keydown",I)}),C={expanded:!1,opened:!1},xe=w("aria-expanded"),ge=e=>t=>u(e,r=>r.expanded).subscribe(xe(t)),he=e=>t=>u(e,r=>r.expanded).subscribe(K(t)),Ee=e=>t=>u(e,r=>r.opened&&!r.expanded).subscribe(K(t)),we={selected:null},G=e=>t=>r=>{switch(r){case e:return t(),!0}return!1},O=G(ee),ye=(e,t)=>r=>{switch(r){case ne:case ae:return e(),!0;case ie:case se:return t(),!0}return!1},j=(e,t)=>r=>{switch(r){case te:return e(),!0;case re:return t(),!0}return!1},Ae=G(T),Le=()=>({items:[],active:-1});function ke(e){return t=>()=>e(t)}var De=(e,t)=>({items:e.items.filter(r=>r.id!==t.id)}),R=e=>e.active===-1||e.items.length===0?void 0:e.active>=e.items.length?e.items[e.active]:e.items[e.active].value,Pe=(e,t,r)=>n=>{let i=n.target.closest(e);t(i),r()};function Ie(e,t){if(e.active===-1||e.items[e.active].disabled)return{};let r=R(e);if(t){let n=new CustomEvent("select",{detail:{selected:r}});t.dispatchEvent(n)}return{expanded:!1,selected:r}}function je(e,t){return{value:t?.value??e.textContent?.trim(),disabled:t?.disabled??!1}}var qe=e=>e.items.findIndex(t=>!t.disabled),Se=e=>{let t=e.active===-1?e.items.length:e.active;for(;--t>-1;)if(!e.items[t].disabled)return t;return e.active},Te=e=>{let t=e.active;for(;++t<e.items.length;)if(!e.items[t].disabled)return t;return e.active},$e=e=>Fe(e.items,t=>!t.disabled);function Fe(e,t){let r=e.length;for(;r--;)if(t(e[r],r,e))return r;return-1}var Ke=(e,t,r)=>n=>{let i=t(),s=je(e,n),d=i.items.find(o=>o.id===e.id);if(d){if(d.value===s.value&&d.disabled===s.disabled)return;Object.assign(d,s)}else i.items.push({id:e.id,...s});r({items:i.items})},Ue=(e,t)=>r=>{let n=e();t(r?n.items.findIndex(i=>i.id===r.id&&!i.disabled):-1)},Ce=(e,t)=>r=>{let n=e(),i=n.active===-1?n.items:n.items.slice(n.active+1).concat(n.items.slice(0,n.active+1)),s=new RegExp(`^${r}`,"i"),d=i.findIndex(o=>o.value.match(s)&&!o.disabled);if(d>-1){let o=(d+n.active+1)%n.items.length;t(o)}};function z(e,t){return r=>{function n(i){i.pointerType!==""&&(!t||t())&&(r.contains(i.target)||r.clientWidth&&(i.preventDefault(),i.stopPropagation(),e(i)))}return $(document.documentElement,"click",n,!0)}}function Ge(e){return t=>{let r=()=>e();return t.addEventListener("pointerout",r),()=>t.removeEventListener("pointerout",r)}}function Oe(e,t){return r=>{let n=i=>{if(i.target!==r){let s=i.target.closest(e);t(s)}};return r.addEventListener("pointermove",n),()=>r.removeEventListener("pointermove",n)}}var Re=()=>e=>(e.setAttribute("aria-haspopup","true"),m);Promise.resolve();var ze=w("aria-modal"),Be=e=>t=>u(e,r=>r.expanded).subscribe(ze(t));function Je(e){let t=F("dialog"),r={...C,...e},n=q(r),i=c=>n.set(r={...r,...c}),s=()=>i({expanded:!0,opened:!0}),d=()=>i({expanded:!1});function o(c){return f(c,t),{destroy:b(c,[p("modal"),Be(n),S(n),pe(n),z(d),h(O(d))])}}let{subscribe:l}=u(n,c=>{let{expanded:x}=c;return{expanded:x}});return{subscribe:l,modal:o,open:s,close:d,set:i}}var He=e=>/^\S$/.test(e),Ne=e=>{let t,r="";return n=>He(n)?(t&&clearTimeout(t),r+=n,e(r),t=window.setTimeout(()=>{t=0,r=""},350),!0):!1};function Me(e){let t=F("menu"),r={...Le(),...C,...we,...e},n=q(r),i=a=>n.set(r={...r,...a}),s=()=>i({expanded:!0,opened:!0}),d=()=>i({expanded:!1,active:-1}),o=()=>r.expanded?d():s(),l=(a,v=!1)=>r.active!==a&&i({expanded:r.expanded||v,active:a}),c=()=>l(qe(r),!0),x=()=>l(Se(r),!0),B=()=>l(Te(r),!0),y=()=>l($e(r),!0),A=()=>i(Ie(r,r.button)),H=()=>l(-1),N=Ce(()=>r,l),L=Ue(()=>r,l),W=a=>i(De(r,a));function J(a){return f(a,t),i({button:a}),{destroy:b(a,[ue("button"),p("button"),Re(),g(0),S(n),ge(n),me(n),P(o),h(D(o),j(y,c)),Ee(n)])}}function M(a){return f(a,t),i({controls:a.id}),{destroy:b(a,[p("menu"),g(0),z(d),P(Pe('[role="menuitem"]',L,A)),Oe('[role="menuitem"]',L),Ge(H),h(D(A),O(d),ye(c,y),j(x,B),Ae(m),Ne(N)),he(n),ce(n)])}}function Q(a,v){f(a,t);let k=Ke(a,()=>r,i);k(v);let X=b(a,[g(-1),p("menuitem"),fe(n),ke(W)]);return{update:k,destroy:X}}let{subscribe:V}=u(n,a=>{let{expanded:v}=a;return{expanded:v,active:R(a)}});return{subscribe:V,button:J,items:M,item:Q,open:s,close:d,set:i}}export{Je as A,Me as G};
